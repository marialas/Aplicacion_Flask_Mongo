{% extends 'index.html' %}
{% block contenido %}
<h2 class="mb-3">Agregar Película</h2>

<form id="formPelicula" onsubmit="agregarPelicula(event)">
  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Código</label>
      <input type="number" name="codigo" class="form-control" required>
    </div>
    <div class="col-md-8">
      <label class="form-label">Título</label>
      <input type="text" name="titulo" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Protagonista</label>
      <input type="text" name="protagonista" class="form-control" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Duración (min)</label>
      <input type="number" name="duracion" class="form-control" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Género</label>
      <select name="genero" id="selectGenero" class="form-select" required></select>
    </div>
    <div class="col-12">
      <label class="form-label">Resumen</label>
      <textarea name="resumen" class="form-control" required></textarea>
    </div>
    <div class="col-12">
      <label class="form-label">Foto (URL)</label>
      <input type="text" name="foto" class="form-control">
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-success">Agregar</button>
    </div>
  </div>
</form>

<div class="mt-3 text-danger" id="mensajePelicula"></div>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const res = await fetch("/genero/");
    const data = await res.json();
    const select = document.getElementById("selectGenero");
    data.generos.forEach(g => {
      const option = document.createElement("option");
      option.value = g._id;
      option.textContent = g.nombre;
      select.appendChild(option);
    });
  });
</script>
{% endblock %}
